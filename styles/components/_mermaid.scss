.mermaid {
  margin: 2rem 0;
  padding: 1.5rem;
  background-color: var(--gray-400);
  border-radius: 8px;
  overflow-x: auto;
  display: flex;
  justify-content: center;

  svg {
    max-width: 100%;
    height: auto;
  }

  // Mermaid diagram styling
  .node rect,
  .node circle,
  .node ellipse,
  .node polygon {
    fill: var(--gray-000);
    stroke: var(--gray-400);
    stroke-width: 2px;
  }

  .edgePath .path {
    stroke: var(--gray-600);
    stroke-width: 2px;
  }

  .edgeLabel {
    background-color: var(--gray-000);
    padding: 4px 8px;
    border-radius: 4px;
    color: #332e2b;

    foreignObject {
      overflow: visible;

      & > div {
        width: max-content;
        height: max-content;
        margin: 0 auto;
        padding: 0;
        line-height: 1.2;
        
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
    }

    p,
    span {
      margin: 0;
      padding: 0;
      line-height: 1.2;
      color: inherit;
    }

    .labelBkg {
      background-color: var(--gray-000);
      color: inherit;
    }
  }

  text {
    fill: var(--gray-900);
    font-family: inherit;
  }

  .actor {
    fill: var(--gray-000);
    stroke: var(--gray-400);
  }

  .messageLine0,
  .messageLine1 {
    stroke: var(--gray-600);
  }

  .labelBox {
    fill: var(--gray-000);
    stroke: var(--gray-400);
  }
}

[data-theme='dark'] {
  .mermaid {
    background-color: var(--gray-900);

    .node rect,
    .node circle,
    .node ellipse,
    .node polygon {
      fill: var(--gray-800);
      stroke: var(--gray-600);
    }

    .edgePath .path {
      stroke: var(--gray-400);
    }

    .edgeLabel {
      background-color: var(--gray-800);

      .labelBkg {
        color: var(--gray-100);
      }

      p {
        color: var(--gray-100);
        margin: 0;
      }
    }

    text {
      fill: var(--gray-100);
    }

    .actor {
      fill: var(--gray-800);
      stroke: var(--gray-600);
    }

    .messageLine0,
    .messageLine1 {
      stroke: var(--gray-400);
    }

    .labelBox {
      fill: var(--gray-800);
      stroke: var(--gray-600);
    }
  }
}
